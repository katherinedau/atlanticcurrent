<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>The Atlantic Current: Mapping the Virgins of Guadalupe and Remedios</title>
    <meta name="description" content="">

    <!-- Icons -->
    <link rel="icon" href="/public/favicon.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="/public/favicon.ico" type="image/x-icon" />


    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Della+Respira|Barlow:300|Lato|Lato:300|Montserrat" rel="stylesheet">

    <!-- Leaflet -->
    <script type="text/javascript" src="/atlanticcurrent/assets/jquery/jquery-1.11.0.min.js"></script>

    <script type="text/javascript" src="/atlanticcurrent/js/site.js"></script>

	<script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"></script>
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />

    <link rel="stylesheet" href="/atlanticcurrent/assets/leaflet-panel-layers/leaflet-panel-layers.min.css">
    <script type="text/javascript" src="/atlanticcurrent/assets/leaflet-panel-layers/leaflet-panel-layers.min.js"></script>
    <link rel="stylesheet" href="/atlanticcurrent/assets/leaflet-panel-layers/leaflet-panel-layers.src.css">
    <script type="text/javascript" src="/atlanticcurrent/assets/leaflet-panel-layers/leaflet-panel-layers.src.js"></script>

	<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.0.4/dist/MarkerCluster.css" />
	<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.0.4/dist/MarkerCluster.Default.css" />
	<script src="https://unpkg.com/leaflet.markercluster@1.0.4/dist/leaflet.markercluster-src.js"></script>

	<script src="https://unpkg.com/leaflet.featuregroup.subgroup@1.0.2/dist/leaflet.featuregroup.subgroup-src.js"></script>

	 <!-- CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/atlanticcurrent/css/main.css">

    <link rel="canonical" href="https://dauk19.wludci.info/atlanticcurrent/">


    <!-- Lightbox -->
	  <link href="assets/lightbox2/lightbox.css" rel="stylesheet">
	  <script src="assets/lightbox2/lightbox.js"></script>

</head>


  <body>

  	<div class="sidebar">
    	<div id="sidebar-content"></div>
</div>

  	   <script>
  	    window.onload = function(){
        if (localStorage['selectedtem'] != undefined){
          new_map();
        } else {
		new_map('single');
        }
        reloadhtml();
  	    };
	      window.onhashchange = function() {
        //new_map();
	      reloadhtml();
	      };
  	    </script>

    <div id="map"> </div>

    <script>

map = L.map('map' , {scrollWheelZoom: false}).setView([0, 0], 1);
var markers = ''

 window.change_map = function(){
    localStorage.setItem('selectedtem', document.getElementById("choose").value);
    new_map();
}

 function makeMap(markergrouping, map){
 	if (markergrouping == 'grouped') { markers = new L.markerClusterGroup({showCoverageOnHover: false});}
	else if (markergrouping == 'single') { markers = new L.featureGroup();}
 	var items = {};

      // set up variables to use during jekyll loop
      var lat, lng, content, marker;
          //map = L.map('map' , {scrollWheelZoom: false}).setView([0, 0], 1);
          var map = map;

      L.tileLayer('https://api.mapbox.com/styles/v1/katherinedau/cjrv3thcl12ys1foicybduh0y/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1Ijoia2F0aGVyaW5lZGF1IiwiYSI6ImNqcnYza2N1dzBpZWEzeXF1bjV2bTQ1NWsifQ.L_xVenACXMnWVlGNtnsxYA', {
        "attribution" : '<a target="_blank" href="https://github.com/kirschbombe/flaneur">Flâneur</a> | Tiles: Mapbox',
        "minZoom" : 0,
        "maxZoom" : 20,
        "errorTileUrl" : "img/error-tile-image.png",
        "subdomains" : ["a", "b", "c", "d"],
        "detectRetina" : true,
      }).addTo(map);

      // jekyll loop through posts
var overLayers = [];
var icons = [];


    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
        icons.push('/assets/leaflet/img/noun_33862_cc_aqua.svg');
    

    
        icons.push('/assets/leaflet/img/noun_33862_cc_black.svg');
    

    
        icons.push('/assets/leaflet/img/noun_33862_cc_blue.svg');
    

    
        icons.push('/assets/leaflet/img/noun_33862_cc_green.svg');
    

    
        icons.push('/assets/leaflet/img/noun_33862_cc_orange.svg');
    

    
        icons.push('/assets/leaflet/img/noun_33862_cc_pink.svg');
    

    
        icons.push('/assets/leaflet/img/noun_33862_cc_plum.svg');
    

    
        icons.push('/assets/leaflet/img/noun_33862_cc_purple.svg');
    

    
        icons.push('/assets/leaflet/img/noun_33862_cc_red.svg');
    

    
        icons.push('/assets/leaflet/img/noun_33862_cc_rose.svg');
    

    
        icons.push('/assets/leaflet/img/noun_33862_cc_teal.svg');
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    


var counter = -1;
var groups = {};


counter += 1;


var layers = [];
if (markergrouping == 'grouped') {
groups[counter] = L.featureGroup.subGroup(markers);
var control = L.control.layers(null, null, { collapsed: true, position: 'topleft' });
}


      lat = 19.472305;
      lng = -99.2517;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>Naucalpan, Mexico...</strong>";
      } else {
      content = "<strong>Naucalpan, Mexico City, Mexico</strong><br>Basílica de Nuestra Señora de los Remedios";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-03-10-naucalpan-rem/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-03-10-naucalpan-rem/";
        article_url = '/atlanticcurrent/article/2019-03-10-naucalpan-rem/';
        item_id = "/article/2019-03-10-naucalpan-rem/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      
      lat = 37.543594;
      lng = -4.316427;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>Zuheros, Cordoba,...</strong>";
      } else {
      content = "<strong>Zuheros, Cordoba, Andalucia</strong><br>This image of Remedios may originate from the 13th century.";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-03-09-zuheros-andalucia/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-03-09-zuheros-andalucia/";
        article_url = '/atlanticcurrent/article/2019-03-09-zuheros-andalucia/';
        item_id = "/article/2019-03-09-zuheros-andalucia/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      
      lat = 37.957659;
      lng = -4.553482;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>Villafranca de...</strong>";
      } else {
      content = "<strong>Villafranca de Cordoba, Cordoba, Andalucia</strong><br>";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-03-09-villafranca-de-cordoba-andalucia/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-03-09-villafranca-de-cordoba-andalucia/";
        article_url = '/atlanticcurrent/article/2019-03-09-villafranca-de-cordoba-andalucia/';
        item_id = "/article/2019-03-09-villafranca-de-cordoba-andalucia/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      
      lat = 36.680619;
      lng = -5.444075;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>Ubrique, Cadiz,...</strong>";
      } else {
      content = "<strong>Ubrique, Cadiz, Andalucia</strong><br>Located in a Capuchin convent, this representation of the Virgin de los Remedios probably originates in the beginning of the 17th century.";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-03-09-ubrique-andalucia/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-03-09-ubrique-andalucia/";
        article_url = '/atlanticcurrent/article/2019-03-09-ubrique-andalucia/';
        item_id = "/article/2019-03-09-ubrique-andalucia/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      
      lat = 37.341885;
      lng = -2.512209;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>Seron, Almeria,...</strong>";
      } else {
      content = "<strong>Seron, Almeria, Andalucia</strong><br>Seron honors its patron with a 19th century hermitage and plaza named after the Virgin.";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-03-09-seron-almeria-andalucia/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-03-09-seron-almeria-andalucia/";
        article_url = '/atlanticcurrent/article/2019-03-09-seron-almeria-andalucia/';
        item_id = "/article/2019-03-09-seron-almeria-andalucia/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      
      lat = 41.132801;
      lng = -1.269131;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>Romanos, Zaragoza,...</strong>";
      } else {
      content = "<strong>Romanos, Zaragoza, Aragon</strong><br>On August 25 each year, the town processes to the hermitage of Remedios.";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-03-09-romanos-aragon-rem/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-03-09-romanos-aragon-rem/";
        article_url = '/atlanticcurrent/article/2019-03-09-romanos-aragon-rem/';
        item_id = "/article/2019-03-09-romanos-aragon-rem/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      
      lat = 37.01652;
      lng = -2.957084;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>Paterna del...</strong>";
      } else {
      content = "<strong>Paterna del Rio, Almeria, Andalucia</strong><br>This ermita de los Remedios lies just under a kilometer outside the town of Paterna del Rio.";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-03-09-paterna-del-rio-andalucia/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-03-09-paterna-del-rio-andalucia/";
        article_url = '/atlanticcurrent/article/2019-03-09-paterna-del-rio-andalucia/';
        item_id = "/article/2019-03-09-paterna-del-rio-andalucia/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      
      lat = 36.926608;
      lng = -5.240636;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>Olvera, Cadiz,...</strong>";
      } else {
      content = "<strong>Olvera, Cadiz, Andalucia</strong><br>Remedios is said to have rescued Olvera from drought in 1715.";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-03-09-olvera-andalucia/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-03-09-olvera-andalucia/";
        article_url = '/atlanticcurrent/article/2019-03-09-olvera-andalucia/';
        item_id = "/article/2019-03-09-olvera-andalucia/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      
      lat = 37.418304;
      lng = -4.588321;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>Nava del...</strong>";
      } else {
      content = "<strong>Nava del Selpillar (Lucena)- Cordoba- Andalucia</strong><br>Although this small town possesses no church there is a confraternity of Los Remedios. The image itself is housed in nearby Lucena.";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-03-09-nava-del-selpillar-andalucia/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-03-09-nava-del-selpillar-andalucia/";
        article_url = '/atlanticcurrent/article/2019-03-09-nava-del-selpillar-andalucia/';
        item_id = "/article/2019-03-09-nava-del-selpillar-andalucia/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      
      lat = 37.135423;
      lng = -2.712094;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>Dona Maria,...</strong>";
      } else {
      content = "<strong>Dona Maria, Almeria, Andalucia</strong><br>The town holds a festival to the Virgon de los Remedios and St. Teresa from October 12-15 each year.";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-03-09-dona-maria-andalucia-rem/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-03-09-dona-maria-andalucia-rem/";
        article_url = '/atlanticcurrent/article/2019-03-09-dona-maria-andalucia-rem/';
        item_id = "/article/2019-03-09-dona-maria-andalucia-rem/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      
      lat = 36.420969;
      lng = -6.148704;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>Chiclana de...</strong>";
      } else {
      content = "<strong>Chiclana de la Frontera, Cadiz, Andalucia</strong><br>Housed in the Church of San Telmo, the icon of Remedios has a long history in Chiclana de la Frontera.";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-03-09-chiclana-de-la-frontera-andalucia/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-03-09-chiclana-de-la-frontera-andalucia/";
        article_url = '/atlanticcurrent/article/2019-03-09-chiclana-de-la-frontera-andalucia/';
        item_id = "/article/2019-03-09-chiclana-de-la-frontera-andalucia/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      
      lat = 37.482188;
      lng = -3.615737;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>Campotejar, Granada,...</strong>";
      } else {
      content = "<strong>Campotejar, Granada, Andalucia</strong><br>";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-03-09-campotejar-andalucia/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-03-09-campotejar-andalucia/";
        article_url = '/atlanticcurrent/article/2019-03-09-campotejar-andalucia/';
        item_id = "/article/2019-03-09-campotejar-andalucia/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      
      lat = 38.277298;
      lng = -5.20307;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>Belmez, Cordoba,...</strong>";
      } else {
      content = "<strong>Belmez, Cordoba, Andalucia</strong><br>The current image of Remedios is a product of the twentieth century as the original was destroyed during the Spanish Civil War.";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-03-09-belmez-andalucia/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-03-09-belmez-andalucia/";
        article_url = '/atlanticcurrent/article/2019-03-09-belmez-andalucia/';
        item_id = "/article/2019-03-09-belmez-andalucia/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      
      lat = 37.163843;
      lng = -3.661875;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>Ambroz (Vega...</strong>";
      } else {
      content = "<strong>Ambroz (Vega del Genil), Granada, Andalucia</strong><br>";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-03-09-ambroz-andalucia/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-03-09-ambroz-andalucia/";
        article_url = '/atlanticcurrent/article/2019-03-09-ambroz-andalucia/';
        item_id = "/article/2019-03-09-ambroz-andalucia/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      
      lat = 39.513308;
      lng = -2.995553;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>El Toboso...</strong>";
      } else {
      content = "<strong>El Toboso</strong><br>this is the map popup text";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-02-06-el-toboso-rem/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-02-06-el-toboso-rem/";
        article_url = '/atlanticcurrent/article/2019-02-06-el-toboso-rem/';
        item_id = "/article/2019-02-06-el-toboso-rem/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      
      lat = 40.839942;
      lng = -0.055752;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>Zaragoza, Romanos...</strong>";
      } else {
      content = "<strong>Zaragoza, Romanos</strong><br>this is the map popup text";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-02-06-zaragoza-romanos/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-02-06-zaragoza-romanos/";
        article_url = '/atlanticcurrent/article/2019-02-06-zaragoza-romanos/';
        item_id = "/article/2019-02-06-zaragoza-romanos/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      
      lat = 40.839942;
      lng = -0.055752;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>La Cerollera,...</strong>";
      } else {
      content = "<strong>La Cerollera, Teruel</strong><br>this is the map popup text";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-02-06-la-cerollera-teruel/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-02-06-la-cerollera-teruel/";
        article_url = '/atlanticcurrent/article/2019-02-06-la-cerollera-teruel/';
        item_id = "/article/2019-02-06-la-cerollera-teruel/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      
      lat = 42.011387;
      lng = 0.25722;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>Fonz, Huesca...</strong>";
      } else {
      content = "<strong>Fonz, Huesca</strong><br>this is the map popup text";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-02-06-fonz-huesca/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-02-06-fonz-huesca/";
        article_url = '/atlanticcurrent/article/2019-02-06-fonz-huesca/';
        item_id = "/article/2019-02-06-fonz-huesca/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      

    var imageurl = '<img class="legend" src="' + iconurl + '">'
    if (markergrouping == 'grouped') {
		map.addLayer(markers);
		var name = imageurl + ' ' + 'Remedios';
		overLayers.push({"name":name, "layer":groups[counter]})
	} else if (markergrouping == 'single') {
	 var name = 'Remedios';
	 overLayers.push({"name":name, icon: imageurl, active: true, "layer":L.layerGroup(layers)})
	}
 
counter += 1;


var layers = [];
if (markergrouping == 'grouped') {
groups[counter] = L.featureGroup.subGroup(markers);
var control = L.control.layers(null, null, { collapsed: true, position: 'topleft' });
}


      lat = 19.484808;
      lng = -99.117862;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>Tepeyac, Mexico...</strong>";
      } else {
      content = "<strong>Tepeyac, Mexico City</strong><br>Basílica de Guadalupe";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-03-10-tepeyac-guad/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-03-10-tepeyac-guad/";
        article_url = '/atlanticcurrent/article/2019-03-10-tepeyac-guad/';
        item_id = "/article/2019-03-10-tepeyac-guad/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      
      lat = 39.704779;
      lng = -5.194911;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>Villar del...</strong>";
      } else {
      content = "<strong>Villar del Pedroso, Caceres, Extremadura</strong><br>";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-02-14-villar-del-pedroso-extremadura-guad/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-02-14-villar-del-pedroso-extremadura-guad/";
        article_url = '/atlanticcurrent/article/2019-02-14-villar-del-pedroso-extremadura-guad/';
        item_id = "/article/2019-02-14-villar-del-pedroso-extremadura-guad/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      
      lat = 39.726556;
      lng = -5.283373;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>Valdelacasa de...</strong>";
      } else {
      content = "<strong>Valdelacasa de Tajo, Caceres, Extremadura</strong><br>no church to be found";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-02-14-valdelacasa-de-tajo-extremadura-guad/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-02-14-valdelacasa-de-tajo-extremadura-guad/";
        article_url = '/atlanticcurrent/article/2019-02-14-valdelacasa-de-tajo-extremadura-guad/';
        item_id = "/article/2019-02-14-valdelacasa-de-tajo-extremadura-guad/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      
      lat = 38.007352;
      lng = -3.368509;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>Ubeda, Jaen,...</strong>";
      } else {
      content = "<strong>Ubeda, Jaen, Andalucia</strong><br>Basílica de Santa María de los Reales Alcázares";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-02-14-ubeda-andalucia-guad/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-02-14-ubeda-andalucia-guad/";
        article_url = '/atlanticcurrent/article/2019-02-14-ubeda-andalucia-guad/';
        item_id = "/article/2019-02-14-ubeda-andalucia-guad/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      
      lat = 43.42451;
      lng = -4.076338;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>Tagle, Cantabria...</strong>";
      } else {
      content = "<strong>Tagle, Cantabria</strong><br>Ermita de Guadalupe";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-02-14-tagle-cantabria-guad/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-02-14-tagle-cantabria-guad/";
        article_url = '/atlanticcurrent/article/2019-02-14-tagle-cantabria-guad/';
        item_id = "/article/2019-02-14-tagle-cantabria-guad/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      
      lat = 42.22514;
      lng = -8.470969;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>Mondariz-Balneario-Pontevedra-Galicia</strong>";
      } else {
      content = "<strong>Mondariz-Balneario-Pontevedra-Galicia</strong><br>church";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-02-14-mondariz-blaneario-galicia-guad/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-02-14-mondariz-blaneario-galicia-guad/";
        article_url = '/atlanticcurrent/article/2019-02-14-mondariz-blaneario-galicia-guad/';
        item_id = "/article/2019-02-14-mondariz-blaneario-galicia-guad/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      
      lat = 43.215367;
      lng = -4.590585;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>Lebena (Cilorgio),...</strong>";
      } else {
      content = "<strong>Lebena (Cilorgio), Cantabria</strong><br>Iglesia de Santa María de Lebeña";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-02-14-lebena-cantabria-guad/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-02-14-lebena-cantabria-guad/";
        article_url = '/atlanticcurrent/article/2019-02-14-lebena-cantabria-guad/';
        item_id = "/article/2019-02-14-lebena-cantabria-guad/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      
      lat = 39.666685;
      lng = -5.813173;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>Jaraiceco, Caceres,...</strong>";
      } else {
      content = "<strong>Jaraiceco, Caceres, Extremadura</strong><br>church????";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-02-14-jaraiceco-extremadura-guad/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-02-14-jaraiceco-extremadura-guad/";
        article_url = '/atlanticcurrent/article/2019-02-14-jaraiceco-extremadura-guad/';
        item_id = "/article/2019-02-14-jaraiceco-extremadura-guad/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      
      lat = 39.312338;
      lng = -4.646116;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>Horcajo de...</strong>";
      } else {
      content = "<strong>Horcajo de los Montes, Ciudad Real, Castilla-La Mancha</strong><br>Ermita Virgen de Guadalupe";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-02-14-horcajo-de-los-montes-castilla-la-mancha-guad/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-02-14-horcajo-de-los-montes-castilla-la-mancha-guad/";
        article_url = '/atlanticcurrent/article/2019-02-14-horcajo-de-los-montes-castilla-la-mancha-guad/';
        item_id = "/article/2019-02-14-horcajo-de-los-montes-castilla-la-mancha-guad/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      
      lat = 37.99801;
      lng = -1.169033;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>Guadalupe, Murcia...</strong>";
      } else {
      content = "<strong>Guadalupe, Murcia</strong><br>Parroquia de Nuestra Senora de Guadalupe";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-02-14-guadalupe-murcia-guad/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-02-14-guadalupe-murcia-guad/";
        article_url = '/atlanticcurrent/article/2019-02-14-guadalupe-murcia-guad/';
        item_id = "/article/2019-02-14-guadalupe-murcia-guad/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      
      lat = 39.255351;
      lng = -4.258006;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>El Torno,...</strong>";
      } else {
      content = "<strong>El Torno, Ciudad Real,</strong><br>plaza of guadalupe";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-02-14-el-torno-guad/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-02-14-el-torno-guad/";
        article_url = '/atlanticcurrent/article/2019-02-14-el-torno-guad/';
        item_id = "/article/2019-02-14-el-torno-guad/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      
      lat = 36.718047;
      lng = -2.841931;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>Matagorda-El Ejido,...</strong>";
      } else {
      content = "<strong>Matagorda-El Ejido, Almeria, Andalucia</strong><br>Iglesia de Nuestra Señora de Guadalupe";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-02-14-el-matagorda-ejido-andalucia-guad/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-02-14-el-matagorda-ejido-andalucia-guad/";
        article_url = '/atlanticcurrent/article/2019-02-14-el-matagorda-ejido-andalucia-guad/';
        item_id = "/article/2019-02-14-el-matagorda-ejido-andalucia-guad/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      
      lat = 36.65616;
      lng = -5.656884;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>El Algar...</strong>";
      } else {
      content = "<strong>El Algar Andalucia Guad</strong><br>Parroquia de Santa María de Guadalupe";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-02-14-el-algar-andalucia-guad/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-02-14-el-algar-andalucia-guad/";
        article_url = '/atlanticcurrent/article/2019-02-14-el-algar-andalucia-guad/';
        item_id = "/article/2019-02-14-el-algar-andalucia-guad/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      
      lat = 42.618443;
      lng = -8.437432;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>Codeseda, Pontevedra,...</strong>";
      } else {
      content = "<strong>Codeseda, Pontevedra, Galicia</strong><br>Church of San Xurxo";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-02-14-codesda-galicia-guad/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-02-14-codesda-galicia-guad/";
        article_url = '/atlanticcurrent/article/2019-02-14-codesda-galicia-guad/';
        item_id = "/article/2019-02-14-codesda-galicia-guad/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      
      lat = 40.325828;
      lng = -4.202344;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>Aldea del...</strong>";
      } else {
      content = "<strong>Aldea del Fresno, Madrid</strong><br>church";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-02-14-aldea-del-fresno-madrid-guad/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-02-14-aldea-del-fresno-madrid-guad/";
        article_url = '/atlanticcurrent/article/2019-02-14-aldea-del-fresno-madrid-guad/';
        item_id = "/article/2019-02-14-aldea-del-fresno-madrid-guad/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      
      lat = 28.126604;
      lng = -17.104034;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>San Sebastian...</strong>";
      } else {
      content = "<strong>San Sebastian de la Gomera, Tenerife, Canarias</strong><br>Ermita de Nuestra Señora de Guadalupe";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-02-11-san-sebastian-de-la-gomera-guad/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-02-11-san-sebastian-de-la-gomera-guad/";
        article_url = '/atlanticcurrent/article/2019-02-11-san-sebastian-de-la-gomera-guad/';
        item_id = "/article/2019-02-11-san-sebastian-de-la-gomera-guad/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      
      lat = 42.653012;
      lng = -8.817926;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>Rianxo, A...</strong>";
      } else {
      content = "<strong>Rianxo, A Coruña</strong><br>Sanctuary to Guadalupe";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-02-11-rianxo-guad/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-02-11-rianxo-guad/";
        article_url = '/atlanticcurrent/article/2019-02-11-rianxo-guad/';
        item_id = "/article/2019-02-11-rianxo-guad/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      
      lat = 39.452384;
      lng = -5.32732;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>Guadalupe, Cáceres...</strong>";
      } else {
      content = "<strong>Guadalupe, Cáceres</strong><br>Royal Monasterio de Guadalupe";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-02-11-guadalupe-extrem/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-02-11-guadalupe-extrem/";
        article_url = '/atlanticcurrent/article/2019-02-11-guadalupe-extrem/';
        item_id = "/article/2019-02-11-guadalupe-extrem/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      
      lat = 43.365355;
      lng = -1.797329;

      if ($(window).height() < 600 || $(window).width() < 550){
      content = "<strong>Fuenterrabía, Guipúzcoa...</strong>";
      } else {
      content = "<strong>Fuenterrabía, Guipúzcoa</strong><br>this is the map popup text";
      }

      var iconurl = "/atlanticcurrent" + icons[counter]
      var mbox = L.icon({
            iconUrl: iconurl,
            iconSize : [46, 50],
            iconAnchor : [17, 36],
            popupAnchor : [-1, 8]
          });
      var marker = L.marker([lat, lng], {
        icon: mbox,
      }).bindPopup(content, {offset:new L.Point(0,-30)});
      marker.iconURL = iconurl;

      if (markergrouping == 'grouped') {
    	marker.addTo(groups[counter])
      } else if (markergrouping == 'single') {
      	layers.push(marker);
      }

      filename = "/article/2019-02-11-fuenterrabia-guad/"
      if (items[filename] == undefined) {
      items[filename] = [marker];
      } else {
      items[filename].push(marker);
      }



      marker.on('click', function(){
        post_url = "/atlanticcurrent/#/article/2019-02-11-fuenterrabia-guad/";
        article_url = '/atlanticcurrent/article/2019-02-11-fuenterrabia-guad/';
        item_id = "/article/2019-02-11-fuenterrabia-guad/";
        window.location = (post_url);
        articlerender(article_url, item_id);

      });

      

    var imageurl = '<img class="legend" src="' + iconurl + '">'
    if (markergrouping == 'grouped') {
		map.addLayer(markers);
		var name = imageurl + ' ' + 'Guadalupe';
		overLayers.push({"name":name, "layer":groups[counter]})
	} else if (markergrouping == 'single') {
	 var name = 'Guadalupe';
	 overLayers.push({"name":name, icon: imageurl, active: true, "layer":L.layerGroup(layers)})
	}
 
      // end loop through posts
if (markergrouping == 'grouped') {
	for (i = 0; i < overLayers.length; i++) {
		control.addOverlay(overLayers[i]['layer'], overLayers[i]['name']);
		control.addTo(map);
		overLayers[i]['layer'].addTo(map);
	}
	control.addTo(map);
} else if (markergrouping == 'single') {
	var panelLayers = new L.Control.PanelLayers(null, overLayers, {
		compact: true,
		collapsed: true,
		position: 'topleft'
	});
map.addControl(panelLayers);

}

map.setView([29.314210, -43.771430], 3)

//map.fitBounds(markers.getBounds());
return items;
}
</script>
<div class="dropdown">
 <button class="menu-button dropdown" onclick="dropdowntoggle()"><i class="fa fa-bars" aria-hidden="true"></i></button>
 		<div class="dropdown-content sub-menu" onclick="dropdowntoggle()">
 		<div class="menu-links">
 		<a class="close-btn"><i class="fa fa-times" aria-hidden="true"></i></a>
 		<a href="/atlanticcurrent/">Home</a>
 		
 		
 			<a href="/atlanticcurrent/#/article-index/" onclick="onClick('/article-index/')" class="menu-link">Browse Articles</a>
		
		
 		
 			<a href="/atlanticcurrent/#/credits/" onclick="onClick('/credits/')" class="menu-link">Acknowledgements</a>
		
		
 		
 		
 		
 		
 		
 		
		</div>
</div>
</div>
<script>
function circletoggle() {
  if ($('.circle-content').css("height") == '0px') {
   $('.circle-content').css("height", '200px');
   $('.circle-content').css("width", '200px');
   $('.circle-content').css("opacity", '.95');
   $('.menu-button').css("display", "none");
   
  } else {
  	$('.circle-content').css("height", '0px');
  	$('.circle-content').css("width", '0px');
  	$('.circle-content').css("opacity", '0');
  	$('.menu-button').css("display", "inline-block");
  }
}
function dropdowntoggle() {
  if ($('.dropdown-content').css("display") == 'none') {
   $('.dropdown-content').css("display", 'block')
  } else {
  	$('.dropdown-content').css("display", 'none')
  }
}

</script>
<select id="choose" class="dropdown" onchange="change_map()">
    <option value="grouped">Clustered</option>
    <option value="single">Not clustered</option>
</select>

</body>
</html>
